

<!doctype><html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Odyssey.js Slides</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/x-icon" href="http://cartodb.github.io/odyssey.js/editor/favicon.png">
  <link rel="icon" type="image/png" href="http://cartodb.github.io/odyssey.js/editor/favicon.png">

  <link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/themes/css/cartodb.css">
  <link rel="stylesheet" href="https://cartodb.github.io/odyssey.js/editor/css/slides.css">
  <link rel="stylesheet" href="slides.css">
  <script src="https://cartodb.github.io/odyssey.js/vendor/modernizr-2.6.2.min.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400' rel='stylesheet' type='text/css'>

</head>
<body>

  <div id="map" style="width: 100%; height: 100%;"></div>
  <div class="background"></div>
  <div id="slides_container" style="display:block;">


    <div id="slides"></div>


  </div>

  <div id="dots"></div>

  <ul id="navButtons">
    <li class="nav-prev"><a class="prev"></a></li>
    <li class="nav-next"><a class="next"></a></li>
  </ul>

  <div id="credits">
    <span class="title" id="title">Title</span>
    <span class="author"><strong id="author">By Name using</strong> <a href="#">Odyssey.js</a><span>
  </span></span></div>

  <script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/cartodb.js"></script>
  <script src="https://cartodb.github.io/odyssey.js/dist/odyssey.js" charset="UTF-8"></script>

  <script>
    var resizePID;

    function clearResize() {
      clearTimeout(resizePID);
      resizePID = setTimeout(function() { adjustSlides(); }, 100);
    }

    if (!window.addEventListener) {
      window.attachEvent("resize", function load(event) {
        clearResize();
      });
    } else {
      window.addEventListener("resize", function load(event) {
        clearResize();
      });
    }

    function adjustSlides() {
      var container = document.getElementById("slides_container"),
          slide = document.querySelectorAll('.selected_slide')[0];

      if (slide) {
        if (slide.offsetHeight+169+40 >= window.innerHeight) {

          var h = container.offsetHeight;

          slide.style.height = h-169+"px";
          slide.classList.add("scrolled");
        } else {
          container.style.bottom = "auto";
          container.style.minHeight = "0";

          slide.style.height = "auto";
          slide.classList.remove("scrolled");
        }
      }
    }

    var resizeAction = O.Action(function() {
      function imageLoaded() {
        counter--;

        if (counter === 0) {
          adjustSlides();
        }
      }
      var images = $('img');
      var counter = images.length;

      images.each(function() {
        if (this.complete) {
          imageLoaded.call( this );
        } else {
          $(this).one('load', imageLoaded);
        }
      });
    });

    function click(el) {
      var element = O.Core.getElement(el);
      var t = O.Trigger();

      // TODO: clean properly
      function click() {
        t.trigger();
      }

      if (element) element.onclick = click;

      return t;
    }

    O.Template({
      init: function() {
        var seq = O.Triggers.Sequential();

        var baseurl = this.baseurl = 'http://{s}.api.cartocdn.com/base-light/{z}/{x}/{y}.png';
        var map = this.map = L.map('map').setView([0, 0.0], 4);
        var basemap = this.basemap = L.tileLayer(baseurl, {
          attribution: 'data OSM - map CartoDB'
        }).addTo(map);

        // enanle keys to move
        O.Keys().on('map').left().then(seq.prev, seq)
        O.Keys().on('map').right().then(seq.next, seq)

        click(document.querySelectorAll('.next')).then(seq.next, seq)
        click(document.querySelectorAll('.prev')).then(seq.prev, seq)

        var slides = O.Actions.Slides('slides');
        var story = O.Story()

        this.story = story;
        this.seq = seq;
        this.slides = slides;
        this.progress = O.UI.DotProgress('dots').count(0);
      },

      update: function(actions) {
        var self = this;

        if (!actions.length) return;

        this.story.clear();

        if (this.baseurl && (this.baseurl !== actions.global.baseurl)) {
          this.baseurl = actions.global.baseurl || 'http://0.api.cartocdn.com/base-light/{z}/{x}/{y}.png';

          this.basemap.setUrl(this.baseurl);
        }

        if (this.cartoDBLayer && ("http://"+self.cartoDBLayer.options.user_name+".cartodb.com/api/v2/viz/"+self.cartoDBLayer.options.layer_definition.stat_tag+"/viz.json" !== actions.global.vizjson)) {
          this.map.removeLayer(this.cartoDBLayer);

          this.cartoDBLayer = null;
          this.created = false;
        }

        if (actions.global.vizjson && !this.cartoDBLayer) {
          if (!this.created) { // sendCode debounce < vis loader
            cdb.vis.Loader.get(actions.global.vizjson, function(vizjson) {
              self.map.fitBounds(vizjson.bounds);

              cartodb.createLayer(self.map, vizjson)
                .done(function(layer) {
                  self.cartoDBLayer = layer;

                  var sublayer = layer.getSubLayer(0),
                      layer_name = layer.layers[0].options.layer_name,
                      filter = actions.global.cartodb_filter ? " WHERE "+actions.global.cartodb_filter : "";

                  sublayer.set({'sql': 'SELECT * FROM '+layer_name+filter, 'cartocss': '#'+layer_name+'{line-color: #FFFFFF; line-width: 2; line-opacity: 0.7; line-dasharray: 10, 4; line-smooth: 1; }'})

                  self.map.addLayer(layer);

                  self._resetActions(actions);
                }).on('error', function(err) {
                  console.log("some error occurred: " + err);
                });
            });

            this.created = true;
          }

          return;
        }

        this._resetActions(actions);
      },

      _resetActions: function(actions) {
        // update footer title and author
        var title_ = actions.global.title === undefined ? '' : actions.global.title,
            author_ = actions.global.author === undefined ? 'Using' : 'By '+actions.global.author+' using';

        document.getElementById('title').innerHTML = title_;
        document.getElementById('author').innerHTML = author_;
        document.title = title_ + " | " + author_ +' Odyssey.js';

        var sl = actions;

        document.getElementById('slides').innerHTML = ''
        this.progress.count(sl.length);

        // create new story
        for(var i = 0; i < sl.length; ++i) {
          var slide = sl[i];

          var tmpl = "<div class='slide slide_"+i+"' style='diplay:none;'>";

          tmpl += slide.html();
          tmpl += "</div>";
          document.getElementById('slides').innerHTML += tmpl;

          this.progress.step(i).then(this.seq.step(i), this.seq)

          var actions = O.Parallel(
            this.slides.activate(i),
            slide(this),
            this.progress.activate(i),
            resizeAction
          );

          actions.on("finish.app", function() {
            adjustSlides();
          });

          this.story.addState(
            this.seq.step(i),
            actions
          )
        }

        this.story.go(this.seq.current());
      },

      changeSlide: function(n) {
        this.seq.current(n);
      }
    });
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20934186-21', 'cartodb.github.io');
    ga('send', 'pageview');
  </script>


<script id="md_template" type="text/template">


```
-baseurl: "https://khms1.googleapis.com/kh?v=152&hl=es-ES&x={x}&y={y}&z={z}&token=123559"
-title: "Loomstate’s Farm-to-Table Tee: Making the most traceable tee shirt in America"
-author: "Loomstate"
-vizjson:"http://lauraguzman.cartodb.com/api/v2/viz/4885126e-0247-11e4-a1c4-0e10bcd91c2b/viz.json"
```

# making the most traceable tee in the world
```
- center: [37.1603, -108.1055]
- zoom: 4
```
The story of cotton starts at the farm and ends with our food. In fact, nearly two-thirds of cotton’s weight - the nutritious cottonseeds - are separated at the gin and sent to cattle farms for fodder.

Loomstate partnered with TS Designs to produce the most traceable tshirt, grown and sewn in America.  The journey took us from a cotton farm, to the cutting floor, and finally to a glass of milk.  Follow our journey.

#organic cotton farm
```
L.marker([36.129374, -77.801195], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [36.129374, -79.801195]
- zoom: 8
```
Our cotton is grown by Phillip and Orpha Gene Watson of **Hickory Meadows Organics** located in Whitakers, North Carolina.
![](img/img-farm.png)


#organic cotton gin
```
L.marker([36.1078107, -77.7133243], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [36.1078107,-77.7133243]
- zoom: 8
```
The cotton is sent just down the road to **Whitakers Gin**, where workers use machines called cotton gins to separate cottonseed from the cotton fiber. From here, they go separate ways...by the end of this journey, you will see where they end up.

![](img/img-cotton.png)

#cotton spinning
```
L.marker([35.8846, -80.0958], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [35.8846, -80.0978]
- zoom: 15
```
Next, the cotton fiber is spun in to thread at **Hill Spinning** in Thomasville, NC. The raw fiber gets carded, combed, spun and spooled.
![](img/img-spinning.png)

#cotton knitting
```
L.marker([35.7876, -78.357013], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [35.7876, -78.357023]
- zoom: 15
```
The finished thread is knit into fabric by the folks at **Mortex Apparel** in Wendell, North Carolina.
![](img/img-knitting.png)

#cut, sew, & trim
```
L.marker([33.879535, -118.0886932], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [33.879535, -118.0886952]
- zoom: 14
```
The organic cotton fabric leaves North Carolina and is cut and sewn into a tshirt at **Fig Apparel Solutions** in Cerritos, California.

#cotton dyeing
```
L.marker([33.8609, -117.9085], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [33.8609, -117.9105]
- zoom: 14
```
![](img/img-dyeing.png)
The cotton is dyed just down the way at **Harry's Dye & Wash** Co in Anaheim, California.  This grown and sewn in America shirt is nearly complete!

#printing
```
L.marker([40.7265, -73.9402], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [40.7265, -73.9622]
- zoom: 14
```
![](img/img-printing.png)
One final stop before the tshirts reach the shop. **Econo Graphics** in Brooklyn, NY print our graphics using water-based and non-toxic inks.  Some shirts may be printed with other local printers.

#dairy
```
L.marker([36.1078107, -77.7133243], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
L.marker([36.1739, -79.5571], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
- center: [36.1739, -79.5591]
- zoom: 8
```
![](img/img-dairy.png)
Remember the cottonseed that was removed from the cotton fibers back at Whitakers Gin in North Carolina? Well, they were sent down the road to George Teague of **Reedy Fork Farms** in Elon, North Carolina.  Here, his dairy cows eat the cottonseed.

#milk processing
```
- center: [35.7337, -82.5601]
- zoom: 7
L.marker([35.7330, -82.5571], {icon: new L.icon({iconUrl: 'img/newmarker.png',  iconAnchor: [19, 44]})}).actions.addRemove(S.map)
```
![](img/img-milk.png)
Milk from these cows is cooled and transported a bit further west to **Milko Inc** in Asheville, North Carolina where it becomes an Organic Valley milk product.  From here, the milk products are distributed to store shelves throughout the North East.

</script>
</body>
</html>
